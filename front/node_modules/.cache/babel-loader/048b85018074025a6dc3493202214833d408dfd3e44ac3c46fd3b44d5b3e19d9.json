{"ast":null,"code":"\"use strict\";\n\nvar _a;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BidiHTTPRequest = exports.requests = void 0;\nconst HTTPRequest_js_1 = require(\"../api/HTTPRequest.js\");\nconst Errors_js_1 = require(\"../common/Errors.js\");\nconst HTTPResponse_js_1 = require(\"./HTTPResponse.js\");\nexports.requests = new WeakMap();\n/**\n * @internal\n */\nclass BidiHTTPRequest extends HTTPRequest_js_1.HTTPRequest {\n  static from(bidiRequest, frame) {\n    const request = new _a(bidiRequest, frame);\n    request.#initialize();\n    return request;\n  }\n  #redirect;\n  #response = null;\n  id;\n  #frame;\n  #request;\n  constructor(request, frame) {\n    super();\n    exports.requests.set(request, this);\n    this.#request = request;\n    this.#frame = frame;\n    this.id = request.id;\n  }\n  get client() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  #initialize() {\n    this.#request.on('redirect', request => {\n      this.#redirect = _a.from(request, this.#frame);\n    });\n    this.#request.once('success', data => {\n      this.#response = HTTPResponse_js_1.BidiHTTPResponse.from(data, this);\n    });\n    this.#frame?.page().trustedEmitter.emit(\"request\" /* PageEvent.Request */, this);\n  }\n  url() {\n    return this.#request.url;\n  }\n  resourceType() {\n    return this.initiator().type.toLowerCase();\n  }\n  method() {\n    return this.#request.method;\n  }\n  postData() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  hasPostData() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  async fetchPostData() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  headers() {\n    const headers = {};\n    for (const header of this.#request.headers) {\n      headers[header.name.toLowerCase()] = header.value.value;\n    }\n    return headers;\n  }\n  response() {\n    return this.#response;\n  }\n  failure() {\n    if (this.#request.error === undefined) {\n      return null;\n    }\n    return {\n      errorText: this.#request.error\n    };\n  }\n  isNavigationRequest() {\n    return this.#request.navigation !== undefined;\n  }\n  initiator() {\n    return this.#request.initiator;\n  }\n  redirectChain() {\n    if (this.#redirect === undefined) {\n      return [];\n    }\n    const redirects = [this.#redirect];\n    for (const redirect of redirects) {\n      if (redirect.#redirect !== undefined) {\n        redirects.push(redirect.#redirect);\n      }\n    }\n    return redirects;\n  }\n  enqueueInterceptAction(pendingHandler) {\n    // Execute the handler when interception is not supported\n    void pendingHandler();\n  }\n  frame() {\n    return this.#frame ?? null;\n  }\n  continueRequestOverrides() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  continue(_overrides = {}) {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  responseForRequest() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  abortErrorReason() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  interceptResolutionState() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  isInterceptResolutionHandled() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  finalizeInterceptions() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  abort() {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n  respond(_response, _priority) {\n    throw new Errors_js_1.UnsupportedOperation();\n  }\n}\nexports.BidiHTTPRequest = BidiHTTPRequest;\n_a = BidiHTTPRequest;","map":{"version":3,"names":["HTTPRequest_js_1","require","Errors_js_1","HTTPResponse_js_1","exports","requests","WeakMap","BidiHTTPRequest","HTTPRequest","from","bidiRequest","frame","request","_a","initialize","redirect","response","id","constructor","set","client","UnsupportedOperation","#initialize","on","once","data","BidiHTTPResponse","page","trustedEmitter","emit","url","resourceType","initiator","type","toLowerCase","method","postData","hasPostData","fetchPostData","headers","header","name","value","failure","error","undefined","errorText","isNavigationRequest","navigation","redirectChain","redirects","push","enqueueInterceptAction","pendingHandler","continueRequestOverrides","continue","_overrides","responseForRequest","abortErrorReason","interceptResolutionState","isInterceptResolutionHandled","finalizeInterceptions","abort","respond","_response","_priority"],"sources":["C:\\Users\\PC\\tryg\\front\\node_modules\\puppeteer-core\\src\\bidi\\HTTPRequest.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2020 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport type * as Bidi from 'chromium-bidi/lib/cjs/protocol/protocol.js';\n\nimport type {CDPSession} from '../api/CDPSession.js';\nimport type {\n  ContinueRequestOverrides,\n  ResponseForRequest,\n} from '../api/HTTPRequest.js';\nimport {HTTPRequest, type ResourceType} from '../api/HTTPRequest.js';\nimport {PageEvent} from '../api/Page.js';\nimport {UnsupportedOperation} from '../common/Errors.js';\n\nimport type {Request} from './core/Request.js';\nimport type {BidiFrame} from './Frame.js';\nimport {BidiHTTPResponse} from './HTTPResponse.js';\n\nexport const requests = new WeakMap<Request, BidiHTTPRequest>();\n\n/**\n * @internal\n */\nexport class BidiHTTPRequest extends HTTPRequest {\n  static from(\n    bidiRequest: Request,\n    frame: BidiFrame | undefined\n  ): BidiHTTPRequest {\n    const request = new BidiHTTPRequest(bidiRequest, frame);\n    request.#initialize();\n    return request;\n  }\n\n  #redirect: BidiHTTPRequest | undefined;\n  #response: BidiHTTPResponse | null = null;\n  override readonly id: string;\n  readonly #frame: BidiFrame | undefined;\n  readonly #request: Request;\n\n  private constructor(request: Request, frame: BidiFrame | undefined) {\n    super();\n    requests.set(request, this);\n\n    this.#request = request;\n    this.#frame = frame;\n    this.id = request.id;\n  }\n\n  override get client(): CDPSession {\n    throw new UnsupportedOperation();\n  }\n\n  #initialize() {\n    this.#request.on('redirect', request => {\n      this.#redirect = BidiHTTPRequest.from(request, this.#frame);\n    });\n    this.#request.once('success', data => {\n      this.#response = BidiHTTPResponse.from(data, this);\n    });\n\n    this.#frame?.page().trustedEmitter.emit(PageEvent.Request, this);\n  }\n\n  override url(): string {\n    return this.#request.url;\n  }\n\n  override resourceType(): ResourceType {\n    return this.initiator().type.toLowerCase() as ResourceType;\n  }\n\n  override method(): string {\n    return this.#request.method;\n  }\n\n  override postData(): string | undefined {\n    throw new UnsupportedOperation();\n  }\n\n  override hasPostData(): boolean {\n    throw new UnsupportedOperation();\n  }\n\n  override async fetchPostData(): Promise<string | undefined> {\n    throw new UnsupportedOperation();\n  }\n\n  override headers(): Record<string, string> {\n    const headers: Record<string, string> = {};\n    for (const header of this.#request.headers) {\n      headers[header.name.toLowerCase()] = header.value.value;\n    }\n    return headers;\n  }\n\n  override response(): BidiHTTPResponse | null {\n    return this.#response;\n  }\n\n  override failure(): {errorText: string} | null {\n    if (this.#request.error === undefined) {\n      return null;\n    }\n    return {errorText: this.#request.error};\n  }\n\n  override isNavigationRequest(): boolean {\n    return this.#request.navigation !== undefined;\n  }\n\n  override initiator(): Bidi.Network.Initiator {\n    return this.#request.initiator;\n  }\n\n  override redirectChain(): BidiHTTPRequest[] {\n    if (this.#redirect === undefined) {\n      return [];\n    }\n    const redirects = [this.#redirect];\n    for (const redirect of redirects) {\n      if (redirect.#redirect !== undefined) {\n        redirects.push(redirect.#redirect);\n      }\n    }\n    return redirects;\n  }\n\n  override enqueueInterceptAction(\n    pendingHandler: () => void | PromiseLike<unknown>\n  ): void {\n    // Execute the handler when interception is not supported\n    void pendingHandler();\n  }\n\n  override frame(): BidiFrame | null {\n    return this.#frame ?? null;\n  }\n\n  override continueRequestOverrides(): never {\n    throw new UnsupportedOperation();\n  }\n\n  override continue(_overrides: ContinueRequestOverrides = {}): never {\n    throw new UnsupportedOperation();\n  }\n\n  override responseForRequest(): never {\n    throw new UnsupportedOperation();\n  }\n\n  override abortErrorReason(): never {\n    throw new UnsupportedOperation();\n  }\n\n  override interceptResolutionState(): never {\n    throw new UnsupportedOperation();\n  }\n\n  override isInterceptResolutionHandled(): never {\n    throw new UnsupportedOperation();\n  }\n\n  override finalizeInterceptions(): never {\n    throw new UnsupportedOperation();\n  }\n\n  override abort(): never {\n    throw new UnsupportedOperation();\n  }\n\n  override respond(\n    _response: Partial<ResponseForRequest>,\n    _priority?: number\n  ): never {\n    throw new UnsupportedOperation();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}