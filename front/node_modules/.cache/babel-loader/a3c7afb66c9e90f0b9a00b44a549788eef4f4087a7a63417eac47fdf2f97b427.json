{"ast":null,"code":"\"use strict\";\n\n/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nvar __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Request = void 0;\nconst EventEmitter_js_1 = require(\"../../common/EventEmitter.js\");\nconst decorators_js_1 = require(\"../../util/decorators.js\");\nconst disposable_js_1 = require(\"../../util/disposable.js\");\n/**\n * @internal\n */\nlet Request = (() => {\n  var _a;\n  let _classSuper = EventEmitter_js_1.EventEmitter;\n  let _instanceExtraInitializers = [];\n  let _dispose_decorators;\n  return class Request extends _classSuper {\n    static {\n      const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(_classSuper[Symbol.metadata] ?? null) : void 0;\n      __esDecorate(this, null, _dispose_decorators, {\n        kind: \"method\",\n        name: \"dispose\",\n        static: false,\n        private: false,\n        access: {\n          has: obj => \"dispose\" in obj,\n          get: obj => obj.dispose\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      if (_metadata) Object.defineProperty(this, Symbol.metadata, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: _metadata\n      });\n    }\n    static from(browsingContext, event) {\n      const request = new Request(browsingContext, event);\n      request.#initialize();\n      return request;\n    }\n    // keep-sorted start\n    #error = (__runInitializers(this, _instanceExtraInitializers), void 0);\n    #redirect;\n    #response;\n    #browsingContext;\n    #disposables = new disposable_js_1.DisposableStack();\n    #event;\n    // keep-sorted end\n    constructor(browsingContext, event) {\n      super();\n      // keep-sorted start\n      this.#browsingContext = browsingContext;\n      this.#event = event;\n      // keep-sorted end\n    }\n    #initialize() {\n      const browsingContextEmitter = this.#disposables.use(new EventEmitter_js_1.EventEmitter(this.#browsingContext));\n      browsingContextEmitter.once('closed', ({\n        reason\n      }) => {\n        this.#error = reason;\n        this.emit('error', this.#error);\n        this.dispose();\n      });\n      const sessionEmitter = this.#disposables.use(new EventEmitter_js_1.EventEmitter(this.#session));\n      sessionEmitter.on('network.beforeRequestSent', event => {\n        if (event.context !== this.#browsingContext.id || event.request.request !== this.id || event.redirectCount !== this.#event.redirectCount + 1) {\n          return;\n        }\n        this.#redirect = Request.from(this.#browsingContext, event);\n        this.emit('redirect', this.#redirect);\n        this.dispose();\n      });\n      sessionEmitter.on('network.fetchError', event => {\n        if (event.context !== this.#browsingContext.id || event.request.request !== this.id || this.#event.redirectCount !== event.redirectCount) {\n          return;\n        }\n        this.#error = event.errorText;\n        this.emit('error', this.#error);\n        this.dispose();\n      });\n      sessionEmitter.on('network.responseCompleted', event => {\n        if (event.context !== this.#browsingContext.id || event.request.request !== this.id || this.#event.redirectCount !== event.redirectCount) {\n          return;\n        }\n        this.#response = event.response;\n        this.emit('success', this.#response);\n        // In case this is a redirect.\n        if (this.#response.status >= 300 && this.#response.status < 400) {\n          return;\n        }\n        this.dispose();\n      });\n    }\n    // keep-sorted start block=yes\n    get #session() {\n      return this.#browsingContext.userContext.browser.session;\n    }\n    get disposed() {\n      return this.#disposables.disposed;\n    }\n    get error() {\n      return this.#error;\n    }\n    get headers() {\n      return this.#event.request.headers;\n    }\n    get id() {\n      return this.#event.request.request;\n    }\n    get initiator() {\n      return this.#event.initiator;\n    }\n    get method() {\n      return this.#event.request.method;\n    }\n    get navigation() {\n      return this.#event.navigation ?? undefined;\n    }\n    get redirect() {\n      return this.#redirect;\n    }\n    get response() {\n      return this.#response;\n    }\n    get url() {\n      return this.#event.request.url;\n    }\n    // keep-sorted end\n    dispose() {\n      this[disposable_js_1.disposeSymbol]();\n    }\n    [(_dispose_decorators = [decorators_js_1.inertIfDisposed], disposable_js_1.disposeSymbol)]() {\n      this.#disposables.dispose();\n      super[disposable_js_1.disposeSymbol]();\n    }\n  };\n})();\nexports.Request = Request;","map":{"version":3,"names":["EventEmitter_js_1","require","decorators_js_1","disposable_js_1","Request","EventEmitter","_classSuper","__esDecorate","_dispose_decorators","kind","name","static","private","access","has","obj","get","dispose","metadata","_metadata","_instanceExtraInitializers","from","browsingContext","event","request","initialize","error","__runInitializers","redirect","response","disposables","DisposableStack","constructor","#initialize","browsingContextEmitter","use","once","reason","emit","sessionEmitter","session","on","context","id","redirectCount","errorText","status","#session","userContext","browser","disposed","headers","initiator","method","navigation","undefined","url","disposeSymbol","inertIfDisposed","exports"],"sources":["C:\\Users\\PC\\tryg\\front\\node_modules\\puppeteer-core\\src\\bidi\\core\\Request.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2024 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport type * as Bidi from 'chromium-bidi/lib/cjs/protocol/protocol.js';\n\nimport {EventEmitter} from '../../common/EventEmitter.js';\nimport {inertIfDisposed} from '../../util/decorators.js';\nimport {DisposableStack, disposeSymbol} from '../../util/disposable.js';\n\nimport type {BrowsingContext} from './BrowsingContext.js';\n\n/**\n * @internal\n */\nexport class Request extends EventEmitter<{\n  /** Emitted when the request is redirected. */\n  redirect: Request;\n  /** Emitted when the request succeeds. */\n  success: Bidi.Network.ResponseData;\n  /** Emitted when the request fails. */\n  error: string;\n}> {\n  static from(\n    browsingContext: BrowsingContext,\n    event: Bidi.Network.BeforeRequestSentParameters\n  ): Request {\n    const request = new Request(browsingContext, event);\n    request.#initialize();\n    return request;\n  }\n\n  // keep-sorted start\n  #error?: string;\n  #redirect?: Request;\n  #response?: Bidi.Network.ResponseData;\n  readonly #browsingContext: BrowsingContext;\n  readonly #disposables = new DisposableStack();\n  readonly #event: Bidi.Network.BeforeRequestSentParameters;\n  // keep-sorted end\n\n  private constructor(\n    browsingContext: BrowsingContext,\n    event: Bidi.Network.BeforeRequestSentParameters\n  ) {\n    super();\n    // keep-sorted start\n    this.#browsingContext = browsingContext;\n    this.#event = event;\n    // keep-sorted end\n  }\n\n  #initialize() {\n    const browsingContextEmitter = this.#disposables.use(\n      new EventEmitter(this.#browsingContext)\n    );\n    browsingContextEmitter.once('closed', ({reason}) => {\n      this.#error = reason;\n      this.emit('error', this.#error);\n      this.dispose();\n    });\n\n    const sessionEmitter = this.#disposables.use(\n      new EventEmitter(this.#session)\n    );\n    sessionEmitter.on('network.beforeRequestSent', event => {\n      if (\n        event.context !== this.#browsingContext.id ||\n        event.request.request !== this.id ||\n        event.redirectCount !== this.#event.redirectCount + 1\n      ) {\n        return;\n      }\n      this.#redirect = Request.from(this.#browsingContext, event);\n      this.emit('redirect', this.#redirect);\n      this.dispose();\n    });\n    sessionEmitter.on('network.fetchError', event => {\n      if (\n        event.context !== this.#browsingContext.id ||\n        event.request.request !== this.id ||\n        this.#event.redirectCount !== event.redirectCount\n      ) {\n        return;\n      }\n      this.#error = event.errorText;\n      this.emit('error', this.#error);\n      this.dispose();\n    });\n    sessionEmitter.on('network.responseCompleted', event => {\n      if (\n        event.context !== this.#browsingContext.id ||\n        event.request.request !== this.id ||\n        this.#event.redirectCount !== event.redirectCount\n      ) {\n        return;\n      }\n      this.#response = event.response;\n      this.emit('success', this.#response);\n      // In case this is a redirect.\n      if (this.#response.status >= 300 && this.#response.status < 400) {\n        return;\n      }\n      this.dispose();\n    });\n  }\n\n  // keep-sorted start block=yes\n  get #session() {\n    return this.#browsingContext.userContext.browser.session;\n  }\n  get disposed(): boolean {\n    return this.#disposables.disposed;\n  }\n  get error(): string | undefined {\n    return this.#error;\n  }\n  get headers(): Bidi.Network.Header[] {\n    return this.#event.request.headers;\n  }\n  get id(): string {\n    return this.#event.request.request;\n  }\n  get initiator(): Bidi.Network.Initiator {\n    return this.#event.initiator;\n  }\n  get method(): string {\n    return this.#event.request.method;\n  }\n  get navigation(): string | undefined {\n    return this.#event.navigation ?? undefined;\n  }\n  get redirect(): Request | undefined {\n    return this.#redirect;\n  }\n  get response(): Bidi.Network.ResponseData | undefined {\n    return this.#response;\n  }\n  get url(): string {\n    return this.#event.request.url;\n  }\n  // keep-sorted end\n\n  @inertIfDisposed\n  private dispose(): void {\n    this[disposeSymbol]();\n  }\n\n  [disposeSymbol](): void {\n    this.#disposables.dispose();\n    super[disposeSymbol]();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}